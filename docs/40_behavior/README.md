# 40_behavior - 振る舞い・ロジック定義

システムの内部動作・ビジネスロジックを定義するドキュメント群です。

## 特性
- **ハイブリッド**:
  - ビジネスロジック・状態管理は**累積的**
  - ユースケースは**フェーズ別**
- **対象読者**: 開発チーム

## ディレクトリ構造

```
40_behavior/
├── README.md              # このファイル
├── business_logic.md      # ビジネスロジック（累積的）
├── state_management.md    # 状態管理（累積的）
├── persistence.md         # 永続化処理（累積的）
└── use_cases/             # ユースケース（フェーズ別）
    ├── phase1/
    │   └── use_cases.md   # または個別ファイル
    └── phase2/
        └── ...
```

## 累積的ドキュメント

| ファイル | 目的 | 更新タイミング |
|---------|------|---------------|
| [business_logic.md](business_logic.md) | ドメインルール・計算ロジック・バリデーション | ルール追加・変更時 |
| [state_management.md](state_management.md) | 状態管理方針・状態遷移 | 状態設計変更時 |
| [persistence.md](persistence.md) | DB操作・キャッシュ・トランザクション | 永続化方針変更時 |

## フェーズ別ドキュメント（ユースケース）

各フェーズのユースケースを `use_cases/phaseN/` に配置:

- [use_cases/phase1/](use_cases/phase1/) - Phase 1 のユースケース

### ユースケースの書き方

```markdown
## UC-001: [ユースケース名]

**対応するユーザーストーリー**: US-001, US-002
**対応する要件**: REQ-F-001

### 目的
（このユースケースで何を達成するか）

### 前提条件
（開始時の状態）

### 実装フロー
1. （ステップ1）
   - 操作:
   - 使用する画面/API: SCR-001 / API-001
   - 内部処理:
   - 期待結果:
2. （ステップ2）
   ...

### 代替フロー
（異なる経路がある場合）

### 例外フロー
（エラー発生時の処理）

### 終了状態
（完了時のシステム状態）
```

## ID体系

- **UC-xxx**: ユースケース（例: UC-001）
- **BL-xxx**: ビジネスロジックルール（例: BL-001）

## トレーサビリティ

```
ユーザーストーリー (US-xxx)
    ↓
ユースケース (UC-xxx) ← 対応するUS-xxxを記載
    ↓
画面仕様 (SCR-xxx) / API仕様 (API-xxx)
    ↓
ビジネスロジック (BL-xxx)
```
