## 5.11 外部連携仕様書

### 概要
外部システムやサービスとの連携に関する詳細を記述するドキュメントです。

**作成タイミング:**
- 各設計段階で必要になったときに順次記述
- 外部連携が発生する機能の設計時に詳細化

### 記載項目

#### 5.11.0 更新履歴
- **記載内容:** このドキュメントをだれがいつなにを更新したかを記述(CHANGELOG相当)

#### 5.11.1 外部システム一覧
- **記載内容:** 連携する外部システムの概要
- 各外部システムについて:
  - **システム名**
  - **提供元**
  - **連携の目的**
  - **連携の重要度:** 必須 / 任意
  - **代替手段:** 連携不可時の対応

#### 5.11.2 連携仕様詳細
- **記載内容:** 各連携の詳細
- 各連携について:
  - **連携ID:** 識別子（例: EXT-001）
  - **連携先システム名**
  - **連携目的:** この連携で何を実現するか
  - **連携タイミング:**
    - リアルタイム
    - バッチ（日次、週次等）
    - イベント駆動
  - **連携方式:**
    - REST API
    - SOAP
    - メッセージキュー（Kafka, RabbitMQ等）
    - ファイル連携（FTP, SFTP等）
  - **データ形式:** JSON, XML, CSV等
  - **認証・認可:**
    - API Key
    - OAuth 2.0
    - 相互TLS
  - **送受信データ:**
    - 送信データの構造
    - 受信データの構造
    - データマッピング
  - **データ同期方法:**
    - 同期 / 非同期
    - 差分更新 / 全件更新
    - 同期頻度
  - **エラーハンドリング:**
    - 連携失敗時の対応
    - リトライポリシー（回数、間隔）
    - タイムアウト設定
    - エラー通知方法
  - **整合性保証:**
    - トランザクション管理
    - 補償トランザクション（Saga パターン等）
  - **依存関係:**
    - 外部システムの可用性への依存度
    - 外部システムダウン時のシステムの振る舞い
  - **パフォーマンス考慮事項:**
    - レート制限
    - バッチサイズ
    - タイムアウト

#### 5.11.3 外部システムのバージョン管理
- **記載内容:** 外部APIのバージョン変更への対応
- 外部APIのバージョン管理方針
- 後方互換性の確認方法
- バージョンアップ時の対応手順
